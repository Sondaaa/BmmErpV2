<?php

/**
 * Pvrception
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    Bmm
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Pvrception extends BasePvrception {

    public function ReadHtmlFichePvDonneeBase($id) {
        $pvreception = PvrceptionTable::getInstance()->find($id);
        //    $agent = AgentsTable::getInstance()->find($id);
        //    $html = 'Entre';
        //<p>  Je soussigné (nom, prénom et qualité) :....................................................................</p>                                
        $html.= ' <h3 style="font-size:18px;">Procès-verbal de Réception </h3>            
            &nbsp;<br>            
<table  style="width: 100%;">
  <tbody>                
      <tr><td><b>Commission de Réception: </b></td></tr>
      <tr>
            <td ><br>';
        if ($pvreception->getIdUser() != null && $pvreception->getIdUser() != '') {
            $ids_user = $pvreception->getIdUser();
            $list_usre = explode(';', $ids_user);
            $liste = json_encode($ids_user);
            if (sizeof($ids_user) >= 1) {
                $user_affecter = UtilisateurTable::getInstance()->getByUsr($list_usre);
                foreach ($user_affecter as $a) :
                    $html.= '<ul><li style=" height: 35px;">  ' . $a->getAgents() . '</li></ul>';
                endforeach;
            }
        }

        $html.= ' <br>  </td>
       </tr>
   </tbody>
 </table ></br>';
        $html.=' <table>
                <tbody>
                    <tr>
                        
                            <table boder="1">
                                <tr>
                                <td style="width: 25%; height: 35px;"><b>Date Création :</b></td>
                                    <td style="width: 75%;">' .
                date('d/m/Y', strtotime($pvreception->getDatepvrecptionprovisoire())) . '</td>
                               <br> </tr>
                                <tr>
                                    <td style="width: 25%; height: 45px;"><b>Observations:</b></td>
                                    <td style="width: 75%;">' . $pvreception->getObservation() . '</td>
                              <br>  </tr>
                                <tr>
                                    <td style="width: 25%; height: 45px;"><b>Réserves:</b></td>
                                    <td style="width: 75%;">' . $pvreception->getReserve() . '</td>
                                </tr>
                            </table>
                       
                    </tr>
                <tbody>
            </table>';
//            <table>
//                <tbody>
//                    <tr>
//                          <td style="width: 100%;">
//                            <table boder="1">
//                                <tr>
//                                    <td style="width: 30%; height: 45px;"><b>Identifiant Carte Professionnelle :</b></td>
//                                    <td style="width: 35%;">' . $pvreception->getId() . '</td>
//                                    <td style="width: 18%;"><b>Etat militaire :</b></td>
//                                    <td style="width: 17%;">' . $pvreception->getId() . '</td>
//                                </tr>
//                                <tr>
//                                    <td style="width: 25%; height: 25px;"><b>Code Postal :</b></td>
//                                    <td style="width: 40%;">' . $pvreception->getId() . '</td>
//                                    <td style="width: 13%;"><b>Pays :</b></td>
//                                    <td style="width: 17%;">' . $pvreception->getId() . '</td>
//                                </tr>
//                               
//                            </table>
//                        </td>
//                    </tr>
//                <tbody>
        $html.='</table>&nbsp;<br>';

        return $html;
    }

}
