<?php

/**
 * LignemouvemententetestockTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class LignemouvemententetestockTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return LignemouvemententetestockTable The table instance
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Lignemouvemententetestock');
    }
    public function loadEtatArticle($compte_min = '',  $date_debut = '', $date_fin = '',  $exercice = '')
    {
        $q = $this->createQuery('l')
            ->leftJoin('l.Mouvemententetestock c')
            ->leftJoin('l.Article a');
        // if ($exercice != '')
        //     $q->andWhere('c.exercice = ?', $exercice);
        if ($compte_min != '')
            $q->andWhere('l.id_article= ?', $compte_min);
        if ($date_debut != '')
            $q->andWhere('l.created_at >= ?', $date_debut);
        if ($date_fin != '')
            $q->andWhere('l.created_at <= ?', $date_fin);
        $q->orderBy('l.created_at asc');
        return $q;
    }
    public function loadEtatArticlePrece($compte_min = '',  $date_debut = '', $date_fin = '',  $exercice = '')
    {
        $q = $this->createQuery('l')
            ->leftJoin('l.Mouvemententetestock c')
            ->leftJoin('l.Article a');

        // if ($exercice != '')
        //     $q->andWhere('c.exercice = ?', $exercice);

        if ($compte_min != '')
            $q->andWhere('l.id_article= ?', $compte_min);


        if ($date_debut != '')
            $q->andWhere('l.created_at >= ?', $date_debut);
        if ($date_fin != '')
            $q->andWhere('l.created_at <= ?', $date_fin);

        $q->orderBy('l.created_at asc');





        return $q;
    }
    public function loadEtatArticle2Pre($compte_min = '', $date_debut = '',  $exercice = '')
    {
        $q = $this->createQuery('l')
            ->leftJoin('l.Mouvemententetestock c')
            ->leftJoin('l.Article a');

        // if ($exercice != '')
        //     $q->andWhere('c.exercice = ?', $exercice);

        if ($compte_min != '')
            $q->andWhere('l.id_article= ?', $compte_min);


        if ($date_debut != '')
            $q->andWhere('l.created_at >= ?', $date_debut);


        $q->orderBy('l.created_at asc');





        return $q;
    }
    public function loadEtatArticleMouvement($compte_min = '',  $date_debut = '', $date_fin = '',  $exercice = '')
    {
        $q = $this->createQuery('l')
            ->leftJoin('l.Mouvemententetestock c')
            ->leftJoin('l.Article a');
        // if ($exercice != '')
        //     $q->andWhere('c.exercice = ?', $exercice);
        if ($compte_min != '')
            $q->andWhere('l.id_article= ?', $compte_min);
        if ($date_debut != '')
            $q->andWhere('l.created_at >= ?', $date_debut);
        if ($date_fin != '')
            $q->andWhere('l.created_at <= ?', $date_fin);
        $q->orderBy('l.created_at asc');
        return $q->execute();
    }
   
}
