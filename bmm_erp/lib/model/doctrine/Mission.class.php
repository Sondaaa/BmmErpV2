<?php

/**
 * Mission
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    PhpProjectTest
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Mission extends BaseMission {

    public function ReadHtmlMission() {

        $html = '<div class="titre" style="text-align:center;font-size:22px;width:100%;">'
                . ' أمـر بمـهـمــة'
                . '</div>&nbsp;<br>&nbsp;<br>';

        $html.='<table>
                <tr><td style="width:160px;text-align:right;font-size:14px;">قبلي، في : ' . date('d/m/Y') . '</td></tr>
                </table>&nbsp;<br>&nbsp;<br>&nbsp;<br>';

        $agent_ouvrier = '';
        $numero = '';

        if ($this->getOuvrier()->getId() != ""):
            //if ouvrier choisi
            $agent_ouvrier = $this->getOuvrier()->getNom() . '--' . $this->getOuvrier()->getPrenom();
            $numero = $this->getOuvrier()->getMatricule();
        else:
            //if agents choisi
            $agent_ouvrier = $this->getAgents()->getNomcomplet() . '--' . $this->getAgents()->getPrenom();
            $numero = $this->getAgents()->getIdrh();
        endif;

        $logement = '';
        if ($this->getLogenment() != "Oui"):
            $logement = 'يتمتع بالإقامة';
        else:
            $logement = 'لا يتمتع بالإقامة';
        endif;

        $html.='<table style="width:100%;text-align:right;">
                    <tr>
                        <td style="height:30px; width:45%;">' . $numero . '</td>
                        <td style="width:5%;">رقم</td>
                        <td style="width:40%;">' . $agent_ouvrier . '</td>
                        <td style="width:10%;">عيــن السيد</td>
                    </tr>
                    <tr><td style="height:30px; width:100%;">التــابع لـديوان تنمية رجيم معتوق .</td></tr>
                    <tr>
                        <td style="height:30px; width:45%;">' . $this->getDuree() . '</td>
                        <td style="width:5%;">يـوم</td>
                        <td style="width:40%;">' . $this->getLieutravail()->getLibelle() . '</td>
                        <td style="width:10%;">للذهـاب إلى</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:90%;">' . date('d/m/Y', strtotime($this->getDatearrive())) . '</td>
                        <td style="width:10%;">تاريخ الخروج</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:90%;">' . $this->getMoyentransport() . '</td>
                        <td style="width:10%;">بواسطــة</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:90%;">' . $this->getMission() . '</td>
                        <td style="width:10%;">للقيــام بمهمـة</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:90%;">' . $this->getReference() . '</td>
                        <td style="width:10%;">المرجع</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:90%;">' . $logement . '</td>
                        <td style="width:10%;">يتمتع بالإقامة</td>
                    </tr>
                </table>&nbsp;<br>&nbsp;<br>';

        $html.='<table style="width:100%;text-align:center;">
                    <tr>
                        <td style="height:140px; width:50%;">العميد الحسين عبيدلي<br>المكلف بتسيير ديوان تنمية رجيم معتوق
                        <br>'.
//                $this->getCheminsignadaf().
                '</td>
                        <td style="width:30%;">إمضاء وختم<br>الرئيس المباشر
                        <br>'.
//                $this->getCheminsigndirecteur().
                '</td>
                    </tr>
                </table>&nbsp;<br>&nbsp;<br>';
        
        $html.='<hr color="black">&nbsp;<br>';

        $html.='<table style="width:100%;text-align:center;">
                    <tr>
                        <td style="height:30px; width:70%;text-align:right;">' . $this->getHeuresortie() . '</td>
                        <td style="width:5%;">ساعة</td>
                        <td style="width:15%;">' . date('d/m/Y', strtotime($this->getDatesortie())) . '</td>
                        <td style="width:10%;">تاريخ الخروج</td>
                    </tr>
                    <tr>
                        <td style="height:30px; width:70%;text-align:right;">' . $this->getHeurearrive() . '</td>
                        <td style="width:5%;">ساعة</td>
                        <td style="width:15%;">' . date('d/m/Y', strtotime($this->getDatearrive())) . '</td>
                        <td style="width:10%;">تاريخ العودة</td>
                    </tr>
                </table>&nbsp;<br>&nbsp;<br>';

        $html.='<table style="width:100%;text-align:center;">
                    <tr>
                        <td style="height:140px; width:50%;">إمضاء وختم الرئيس المباش<br>' .
//                $this->getCheminsigndirecteur() . 
                '</td>
                        <td style="width:20%;"></td>
                        <td style="width:30%;">إمضاء العون<br>' . 
//                $this->getCheminsignagents() . 
                '</td>
                    </tr>
                </table>';

        return $html;
    }

}
