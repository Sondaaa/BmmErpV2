<?php

/**
 * Expdest
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    Bmm
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Expdest extends BaseExpdest {

    public function __toString() {
//        if(!$this->getIdAgent())
        return '' . $this->getFamexpdes() . ' ' . $this->getNpresponsable();
//    else {
//         return "" . $this->getNpresponsable();
//    }
    }
    
    function is_rtl($string) {
        $rtl_chars_pattern = '/[\x{0590}-\x{05ff}\x{0600}-\x{06ff}]/u';
        return preg_match($rtl_chars_pattern, $string);
    }

    public function getRtl() {
        if ($this->is_rtl($this->getNpresponsable()) == 1)
            return '' . $this->getFamexpdes() . '<div style="direction:rtl;">' . $this->getNpresponsable() . '</div>';
        else
            return '' . $this->getFamexpdes() . ' ' . $this->getNpresponsable();
//        return '' . $this->getFamexpdes();
    }

    public function getUser() {
        if ($this->getIdAgent()) {
            $user = Doctrine_Core::getTable('utilisateur')->findOneByIdParent($this->getIdAgent());
            if ($user)
                return $user;
        }
        return null;
    }

}
