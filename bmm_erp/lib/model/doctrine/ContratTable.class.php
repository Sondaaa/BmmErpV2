<?php

/**
 * ContratTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class ContratTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object ContratTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Contrat');
    }
     public function load($id_regroupement,$id_agents,$id_posterh,$id_unite) {
    //      die($id_regroupement.'g4');
        $query = $this->createQuery('a');
        $query->select('c.*')
                ->from('Contrat c')
                 ->leftJoin('c.Agents a');

        if ($id_agents != '')
        {    $query->andWhere("c.id_agents = " . $id_agents );
       }
        if ($id_posterh != '')
            $query->andWhere("c.id_posterh=" . $id_posterh);
        
        if ($id_unite != '')
           $query->andWhere("c.id_unite=" . $id_unite);
        

        if ($id_regroupement != '' && $id_regroupement != '0')
            $query->andWhere("a.id_regrouppement =" . $id_regroupement);

               
        return $query;
    }
  
}