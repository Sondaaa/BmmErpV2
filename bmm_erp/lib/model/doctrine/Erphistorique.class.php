<?php

/**
 * Erphistorique
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    BmmErpTest
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Erphistorique extends BaseErphistorique
{
    public function AjouterLigne($idEtranger,$tablename,$iduser,$userlogin){
        
        $erphistorique= Doctrine_Core::getTable('erphistorique')->findOneByIdetrangerAndNametable($idEtranger,$tablename);
        if(!$erphistorique)
        {
            $his=new Erphistorique();
            $his->setIdetranger($idEtranger);
            $his->setNametable($tablename);
            $his->setDatemaj(date('Y-m-d H:i:s'));
            $his->setUserlogin($userlogin);
            $his->setIduser($iduser);
            $his->save();
        }else{
            $his=new Erphistorique();
            $his->setIdetranger($idEtranger);
            $his->setNametable($tablename);
            $his->setDatemaj(date('Y-m-d H:i:s'));
            $his->setUserlogin($userlogin);
            $his->setIduser($iduser);
            $his->setIdhistorique($erphistorique->getId());
            $his->save();
        }
        
    }
}