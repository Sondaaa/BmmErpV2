<?php

/**
 * UtilisateurTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class UtilisateurTable extends Doctrine_Table {

    /**
     * Returns an instance of this class.
     *
     * @return object UtilisateurTable
     */
    public static function getInstance() {
        return Doctrine_Core::getTable('Utilisateur');
    }

    public function getAllByOrder() {
        $q = $this->createQuery('u')
                ->orderBy('u.login');

        return $q->execute();
    }

    public function getByUsrNonaffecter($list_user) {
        $list = json_encode($list_user);
        $q = $this->createQuery('u')
                // ->select('concat(ag.nomcomplet,ag.prenom)')
                ->from('Utilisateur u ')
                ->whereNotIn("u.id ", $list_user)
                // ->andWhere('utilisateur.id_parent=ag.id')
                ->orderBy('u.id ASC');
        //die($q);
        return $q->execute();
    }

    public function getByUsr($list_usre) {
        $q = $this->createQuery('u')
             //   ->select('concat(agents.nomcomplet,agents.prenom)')
                ->from('Utilisateur u')
                ->whereIn("id", $list_usre)
                ->orderBy('u.id ASC');
        return $q->execute();
    }

}
